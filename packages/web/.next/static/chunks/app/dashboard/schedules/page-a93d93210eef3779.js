(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[446],{7284:function(e,t,r){Promise.resolve().then(r.bind(r,3429))},5606:function(e,t,r){"use strict";var o=r(9894);t.Z=void 0;var n=o(r(1402)),i=r(1674);t.Z=(0,n.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},2595:function(e,t,r){"use strict";var o=r(9894);t.Z=void 0;var n=o(r(1402)),i=r(1674);t.Z=(0,n.default)((0,i.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft")},924:function(e,t,r){"use strict";var o=r(9894);t.Z=void 0;var n=o(r(1402)),i=r(1674);t.Z=(0,n.default)((0,i.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight")},4482:function(e,t,r){"use strict";var o=r(9894);t.Z=void 0;var n=o(r(1402)),i=r(1674);t.Z=(0,n.default)((0,i.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList")},647:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var o=r(6723),n=r(9885),i=r(6655),a=r(4115),s=r(3725),l=r(7384),c=r(3997),d=r(4118),u=r(8890),h=r(1949),v=r(8621),f=r(132);function p(e){return(0,f.ZP)("MuiIconButton",e)}let g=(0,v.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var Z=r(1674);let m=["edge","children","className","color","disabled","disableFocusRipple","size"],x=e=>{let{classes:t,disabled:r,color:o,edge:n,size:i}=e,a={root:["root",r&&"disabled","default"!==o&&"color".concat((0,h.Z)(o)),n&&"edge".concat((0,h.Z)(n)),"size".concat((0,h.Z)(i))]};return(0,s.Z)(a,p,t)},y=(0,c.ZP)(u.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"default"!==r.color&&t["color".concat((0,h.Z)(r.color))],r.edge&&t["edge".concat((0,h.Z)(r.edge))],t["size".concat((0,h.Z)(r.size))]]}})(e=>{let{theme:t,ownerState:r}=e;return(0,n.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===r.edge&&{marginLeft:"small"===r.size?-3:-12},"end"===r.edge&&{marginRight:"small"===r.size?-3:-12})},e=>{var t;let{theme:r,ownerState:o}=e,i=null==(t=(r.vars||r).palette)?void 0:t[o.color];return(0,n.Z)({},"inherit"===o.color&&{color:"inherit"},"inherit"!==o.color&&"default"!==o.color&&(0,n.Z)({color:null==i?void 0:i.main},!o.disableRipple&&{"&:hover":(0,n.Z)({},i&&{backgroundColor:r.vars?"rgba(".concat(i.mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,l.Fq)(i.main,r.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===o.size&&{padding:5,fontSize:r.typography.pxToRem(18)},"large"===o.size&&{padding:12,fontSize:r.typography.pxToRem(28)},{["&.".concat(g.disabled)]:{backgroundColor:"transparent",color:(r.vars||r).palette.action.disabled}})});var b=i.forwardRef(function(e,t){let r=(0,d.i)({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:l,color:c="default",disabled:u=!1,disableFocusRipple:h=!1,size:v="medium"}=r,f=(0,o.Z)(r,m),p=(0,n.Z)({},r,{edge:i,color:c,disabled:u,disableFocusRipple:h,size:v}),g=x(p);return(0,Z.jsx)(y,(0,n.Z)({className:(0,a.Z)(g.root,l),centerRipple:!0,focusRipple:!h,disabled:u,ref:t},f,{ownerState:p,children:s}))})},4766:function(e,t,r){"use strict";var o=r(9885),n=r(7272);t.Z=function(e,t,r){return void 0===e||(0,n.Z)(e)?t:(0,o.Z)({},t,{ownerState:(0,o.Z)({},t.ownerState,r)})}},1442:function(e,t){"use strict";t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};let r={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&"function"==typeof e[r]&&!t.includes(r)).forEach(t=>{r[t]=e[t]}),r}},7272:function(e,t){"use strict";t.Z=function(e){return"string"==typeof e}},7042:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var o=r(9885),n=r(4115),i=r(1442),a=function(e){if(void 0===e)return{};let t={};return Object.keys(e).filter(t=>!(t.match(/^on[A-Z]/)&&"function"==typeof e[t])).forEach(r=>{t[r]=e[r]}),t},s=function(e){let{getSlotProps:t,additionalProps:r,externalSlotProps:s,externalForwardedProps:l,className:c}=e;if(!t){let e=(0,n.Z)(null==r?void 0:r.className,c,null==l?void 0:l.className,null==s?void 0:s.className),t=(0,o.Z)({},null==r?void 0:r.style,null==l?void 0:l.style,null==s?void 0:s.style),i=(0,o.Z)({},r,l,s);return e.length>0&&(i.className=e),Object.keys(t).length>0&&(i.style=t),{props:i,internalRef:void 0}}let d=(0,i.Z)((0,o.Z)({},l,s)),u=a(s),h=a(l),v=t(d),f=(0,n.Z)(null==v?void 0:v.className,null==r?void 0:r.className,c,null==l?void 0:l.className,null==s?void 0:s.className),p=(0,o.Z)({},null==v?void 0:v.style,null==r?void 0:r.style,null==l?void 0:l.style,null==s?void 0:s.style),g=(0,o.Z)({},v,r,h,u);return f.length>0&&(g.className=f),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:v.ref}}},9553:function(e,t){"use strict";t.Z=function(e,t,r){return"function"==typeof e?e(t,r):e}},3429:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var o=r(1674);r(6655);var n=r(2498),i=r(8623),a=r(9748),s=r(7575),l=r(821),c=r(5147),d=r(647),u=r(10),h=r(2162),v=r(2595),f=r(924),p=r(4482),g=r(5606),Z=r(9081);let m=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function x(){let{shifts:e,isLoading:t,isError:r}=(0,Z.dE)(),x=t=>e.filter(e=>new Date(e.startTime).toLocaleDateString("en-US",{weekday:"long"})===t);return(0,o.jsxs)(n.Z,{children:[(0,o.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:4},children:[(0,o.jsxs)(n.Z,{children:[(0,o.jsx)(a.Z,{variant:"h4",sx:{fontWeight:800},children:"Shift Schedule"}),(0,o.jsx)(a.Z,{color:"text.secondary",children:"Create, publish, and manage worker assignments."})]}),(0,o.jsxs)(i.Z,{direction:"row",spacing:2,children:[(0,o.jsx)(s.Z,{variant:"outlined",startIcon:(0,o.jsx)(p.Z,{}),sx:{borderRadius:2},children:"Export"}),(0,o.jsx)(s.Z,{variant:"contained",startIcon:(0,o.jsx)(g.Z,{}),sx:{borderRadius:2},children:"Create Shift"})]})]}),r&&(0,o.jsx)(l.Z,{severity:"error",sx:{mb:3},children:"Failed to load schedules."}),(0,o.jsxs)(c.Z,{sx:{p:3,borderRadius:4,border:"1px solid",borderColor:"divider"},children:[(0,o.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:4},children:[(0,o.jsxs)(i.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,o.jsx)(d.Z,{size:"small",children:(0,o.jsx)(v.Z,{})}),(0,o.jsx)(a.Z,{variant:"h6",sx:{fontWeight:700},children:"Current Week"}),(0,o.jsx)(d.Z,{size:"small",children:(0,o.jsx)(f.Z,{})})]}),(0,o.jsxs)(i.Z,{direction:"row",spacing:1,children:[(0,o.jsx)(s.Z,{variant:"contained",disableElevation:!0,sx:{bgcolor:"rgba(45, 63, 226, 0.1)",color:"primary.main",fontWeight:700},children:"Week"}),(0,o.jsx)(s.Z,{variant:"text",color:"inherit",children:"Month"})]})]}),(0,o.jsx)(u.ZP,{container:!0,spacing:0,sx:{borderTop:"1px solid",borderLeft:"1px solid",borderColor:"divider"},children:m.map(e=>(0,o.jsxs)(u.ZP,{item:!0,xs:!0,sx:{minHeight:600,borderRight:"1px solid",borderBottom:"1px solid",borderColor:"divider"},children:[(0,o.jsx)(n.Z,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)",borderBottom:"1px solid",borderColor:"divider",textAlign:"center"},children:(0,o.jsx)(a.Z,{variant:"caption",sx:{fontWeight:800,color:"text.secondary",textTransform:"uppercase"},children:e})}),(0,o.jsxs)(n.Z,{sx:{p:1},children:[t?(0,o.jsx)(n.Z,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,o.jsx)(h.Z,{size:20})}):x(e).map(e=>{var t;return(0,o.jsxs)(c.Z,{elevation:0,sx:{p:1.5,mb:1.5,borderRadius:2,bgcolor:"background.default",borderLeft:"4px solid #2D3FE2",cursor:"pointer","&:hover":{transform:"scale(1.02)"},transition:"0.2s",border:"1px solid",borderColor:"divider"},children:[(0,o.jsx)(a.Z,{variant:"caption",sx:{fontWeight:800,color:"primary.main"},children:new Date(e.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,o.jsx)(a.Z,{variant:"body2",sx:{fontWeight:700,mt:.5},children:e.title}),(0,o.jsxs)(a.Z,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:[(null===(t=e.assignedWorkers)||void 0===t?void 0:t.length)||0," / ",e.capacity," Filled"]})]},e._id)}),(0,o.jsx)(s.Z,{fullWidth:!0,variant:"text",startIcon:(0,o.jsx)(g.Z,{}),sx:{border:"1px dashed",borderColor:"divider",borderRadius:2,py:1,color:"text.secondary",opacity:.5,mt:1,"&:hover":{opacity:1,borderColor:"primary.main",color:"primary.main"}},children:"Shift"})]})]},e))})]})]})}},8314:function(e,t,r){"use strict";r.d(t,{h:function(){return i}});var o=r(925);let n=r(5504).env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api/v1",i=o.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let t=localStorage.getItem("accessToken");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){r._retry=!0;try{let e=localStorage.getItem("refreshToken");if(!e)throw Error("No refresh token");let{data:t}=await o.Z.post("".concat(n,"/auth/refresh"),{refreshToken:e});return localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),r.headers.Authorization="Bearer ".concat(t.accessToken),i(r)}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)})},9081:function(e,t,r){"use strict";r.d(t,{L8:function(){return c},cs:function(){return l},dE:function(){return s},iy:function(){return a}});var o=r(2025),n=r(8314);let i=e=>n.h.get(e).then(e=>e.data),a=()=>{let{data:e,error:t,mutate:r}=(0,o.ZP)("/users",i);return{staff:(null==e?void 0:e.users)||[],isLoading:!t&&!e,isError:t,mutate:r}},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),{data:r,error:n,mutate:a}=(0,o.ZP)("/shifts?".concat(t),i);return{shifts:(null==r?void 0:r.shifts)||[],isLoading:!n&&!r,isError:n,mutate:a}},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),{data:r,error:n,mutate:a}=(0,o.ZP)("/timeclock/entries?".concat(t),i);return{entries:(null==r?void 0:r.entries)||[],isLoading:!n&&!r,isError:n,mutate:a}},c=(e,t)=>{let{data:r,error:i,mutate:a}=(0,o.ZP)(e&&t?["/payroll/calculate",e,t]:null,()=>n.h.post("/payroll/calculate",{startDate:e,endDate:t}).then(e=>e.data));return{payroll:(null==r?void 0:r.results)||[],summary:(null==r?void 0:r.summary)||{totalGrossPay:0,totalPAYE:0,totalNI:0,totalNetPay:0},isLoading:!i&&!r,isError:i,mutate:a}}}},function(e){e.O(0,[462,954,781,470,10,821,293,997,744],function(){return e(e.s=7284)}),_N_E=e.O()}]);