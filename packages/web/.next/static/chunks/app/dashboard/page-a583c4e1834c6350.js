(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6364:function(e,t,r){Promise.resolve().then(r.bind(r,9847))},147:function(e,t,r){"use strict";var n=r(9894);t.Z=void 0;var s=n(r(1402)),o=r(1674);t.Z=(0,s.default)((0,o.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m3.3 14.71L11 12.41V7h2v4.59l3.71 3.71z"}),"AccessTimeFilled")},9617:function(e,t,r){"use strict";var n=r(9894);t.Z=void 0;var s=n(r(1402)),o=r(1674);t.Z=(0,s.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")},3582:function(e,t,r){"use strict";var n=r(9894);t.Z=void 0;var s=n(r(1402)),o=r(1674);t.Z=(0,s.default)([(0,o.jsx)("path",{fillRule:"evenodd",d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87"},"0"),(0,o.jsx)("circle",{cx:"9",cy:"8",r:"4",fillRule:"evenodd"},"1"),(0,o.jsx)("path",{fillRule:"evenodd",d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"},"2")],"PeopleAlt")},270:function(e,t,r){"use strict";var n=r(9894);t.Z=void 0;var s=n(r(1402)),o=r(1674);t.Z=(0,s.default)((0,o.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},7647:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var n=r(9885),s=r(6723),o=r(6655),i=r(4115),a=r(3725),c=r(3997),l=r(4118),d=r(8621),u=r(132);function h(e){return(0,u.ZP)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var f=r(1674);let v=["className","component"],x=e=>{let{classes:t}=e;return(0,a.Z)({root:["root"]},h,t)},m=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var Z=o.forwardRef(function(e,t){let r=(0,l.i)({props:e,name:"MuiCardContent"}),{className:o,component:a="div"}=r,c=(0,s.Z)(r,v),d=(0,n.Z)({},r,{component:a}),u=x(d);return(0,f.jsx)(m,(0,n.Z)({as:a,className:(0,i.Z)(u.root,o),ownerState:d,ref:t},c))})},8889:function(e,t,r){"use strict";var n=r(9885),s=r(6723),o=r(6655),i=r(4115),a=r(3725),c=r(3997),l=r(4118),d=r(5147),u=r(2629),h=r(1674);let f=["className","raised"],v=e=>{let{classes:t}=e;return(0,a.Z)({root:["root"]},u.y,t)},x=(0,c.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),m=o.forwardRef(function(e,t){let r=(0,l.i)({props:e,name:"MuiCard"}),{className:o,raised:a=!1}=r,c=(0,s.Z)(r,f),d=(0,n.Z)({},r,{raised:a}),u=v(d);return(0,h.jsx)(x,(0,n.Z)({className:(0,i.Z)(u.root,o),elevation:a?8:void 0,ref:t,ownerState:d},c))});t.Z=m},2629:function(e,t,r){"use strict";r.d(t,{y:function(){return o}});var n=r(8621),s=r(132);function o(e){return(0,s.ZP)("MuiCard",e)}let i=(0,n.Z)("MuiCard",["root"]);t.Z=i},9847:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var n=r(1674);r(6655);var s=r(8889),o=r(7647),i=r(8623),a=r(2498),c=r(9748),l=r(2162),d=r(7575),u=r(10),h=r(5147),f=r(270),v=r(3582),x=r(147),m=r(9617),Z=r(9081);let p=e=>{let{title:t,value:r,icon:l,color:d,trend:u}=e;return(0,n.jsx)(s.Z,{sx:{height:"100%",borderRadius:4},children:(0,n.jsxs)(o.Z,{children:[(0,n.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:2},children:[(0,n.jsx)(a.Z,{sx:{p:1.5,borderRadius:3,bgcolor:"".concat(d,".light"),color:"".concat(d,".main"),display:"flex"},children:l}),u&&(0,n.jsxs)(i.Z,{direction:"row",alignItems:"center",spacing:.5,sx:{color:"success.main"},children:[(0,n.jsx)(f.Z,{fontSize:"small"}),(0,n.jsxs)(c.Z,{variant:"caption",sx:{fontWeight:700},children:[u,"%"]})]})]}),(0,n.jsx)(c.Z,{variant:"h4",sx:{fontWeight:800,mb:.5},children:r}),(0,n.jsx)(c.Z,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:t})]})})};function g(){let{staff:e,isLoading:t}=(0,Z.iy)(),{shifts:r,isLoading:s}=(0,Z.dE)(),{entries:o,isLoading:g}=(0,Z.cs)();if(t||s||g)return(0,n.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",py:10},children:(0,n.jsx)(l.Z,{})});let j=o.filter(e=>"clocked_in"===e.status).length,y=o.filter(e=>"approved"===e.status).length;return(0,n.jsxs)(a.Z,{children:[(0,n.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:4},children:[(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(c.Z,{variant:"h4",sx:{fontWeight:800},children:"Dashboard Overview"}),(0,n.jsx)(c.Z,{color:"text.secondary",children:"Real-time workplace insights from your connected API."})]}),(0,n.jsx)(d.Z,{variant:"contained",size:"large",sx:{borderRadius:2},children:"+ Create Shift"})]}),(0,n.jsxs)(u.ZP,{container:!0,spacing:3,children:[(0,n.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(p,{title:"Total Staff",value:e.length,icon:(0,n.jsx)(v.Z,{}),color:"primary"})}),(0,n.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(p,{title:"Active Shifts",value:r.length,icon:(0,n.jsx)(x.Z,{}),color:"secondary"})}),(0,n.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(p,{title:"Clocked In",value:j,icon:(0,n.jsx)(f.Z,{}),color:"info"})}),(0,n.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(p,{title:"Approved Entries",value:y,icon:(0,n.jsx)(m.Z,{}),color:"success"})}),(0,n.jsx)(u.ZP,{item:!0,xs:12,md:12,children:(0,n.jsxs)(h.Z,{sx:{p:3,borderRadius:4},children:[(0,n.jsx)(c.Z,{variant:"h6",sx:{fontWeight:700,mb:3},children:"Recent Activity"}),(0,n.jsxs)(i.Z,{spacing:2,children:[o.slice(0,5).map(e=>{var t,r;let s=e.workerId;return(0,n.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsxs)(a.Z,{children:[(0,n.jsxs)(c.Z,{variant:"body2",sx:{fontWeight:600},children:[null===(t=s.name)||void 0===t?void 0:t.first," ",null===(r=s.name)||void 0===r?void 0:r.last]}),(0,n.jsx)(c.Z,{variant:"caption",color:"text.secondary",children:new Date(e.clockIn.time).toLocaleTimeString()})]}),(0,n.jsx)(c.Z,{variant:"caption",sx:{px:1.5,py:.5,borderRadius:1.5,fontWeight:700,bgcolor:"approved"===e.status?"success.light":"warning.light",color:"approved"===e.status?"success.main":"warning.main",textTransform:"capitalize"},children:e.status.replace("_"," ")})]},e._id)}),0===o.length&&(0,n.jsx)(c.Z,{color:"text.secondary",children:"No recent activity found."})]})]})})]})]})}},8314:function(e,t,r){"use strict";r.d(t,{h:function(){return o}});var n=r(925);let s=r(5504).env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api/v1",o=n.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{{let t=localStorage.getItem("accessToken");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){r._retry=!0;try{let e=localStorage.getItem("refreshToken");if(!e)throw Error("No refresh token");let{data:t}=await n.Z.post("".concat(s,"/auth/refresh"),{refreshToken:e});return localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),r.headers.Authorization="Bearer ".concat(t.accessToken),o(r)}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)})},9081:function(e,t,r){"use strict";r.d(t,{L8:function(){return l},cs:function(){return c},dE:function(){return a},iy:function(){return i}});var n=r(2025),s=r(8314);let o=e=>s.h.get(e).then(e=>e.data),i=()=>{let{data:e,error:t,mutate:r}=(0,n.ZP)("/users",o);return{staff:(null==e?void 0:e.users)||[],isLoading:!t&&!e,isError:t,mutate:r}},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),{data:r,error:s,mutate:i}=(0,n.ZP)("/shifts?".concat(t),o);return{shifts:(null==r?void 0:r.shifts)||[],isLoading:!s&&!r,isError:s,mutate:i}},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),{data:r,error:s,mutate:i}=(0,n.ZP)("/timeclock/entries?".concat(t),o);return{entries:(null==r?void 0:r.entries)||[],isLoading:!s&&!r,isError:s,mutate:i}},l=(e,t)=>{let{data:r,error:o,mutate:i}=(0,n.ZP)(e&&t?["/payroll/calculate",e,t]:null,()=>s.h.post("/payroll/calculate",{startDate:e,endDate:t}).then(e=>e.data));return{payroll:(null==r?void 0:r.results)||[],summary:(null==r?void 0:r.summary)||{totalGrossPay:0,totalPAYE:0,totalNI:0,totalNetPay:0},isLoading:!o&&!r,isError:o,mutate:i}}}},function(e){e.O(0,[462,954,781,470,10,293,997,744],function(){return e(e.s=6364)}),_N_E=e.O()}]);