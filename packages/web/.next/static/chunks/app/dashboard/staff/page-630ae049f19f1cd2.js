(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{7539:function(e,r,t){Promise.resolve().then(t.bind(t,9523))},9523:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return k}});var s=t(1674),n=t(6655),i=t(2498),o=t(8623),a=t(9748),l=t(7575),c=t(821),d=t(5147),h=t(6561),u=t(2720),x=t(150),f=t(8349),m=t(8258),Z=t(9107),g=t(5540),j=t(6267),p=t(2162),v=t(6715),y=t(5402),b=t(647),w=t(2393),S=t(2203),C=t(9186),L=t(4482),P=t(9081);function k(){let{staff:e,isLoading:r,isError:t}=(0,P.iy)(),[k,I]=(0,n.useState)(""),E=e.filter(e=>e.name.first.toLowerCase().includes(k.toLowerCase())||e.name.last.toLowerCase().includes(k.toLowerCase())||e.email.toLowerCase().includes(k.toLowerCase()));return(0,s.jsxs)(i.Z,{children:[(0,s.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:4},children:[(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(a.Z,{variant:"h4",sx:{fontWeight:800},children:"Staff Management"}),(0,s.jsx)(a.Z,{color:"text.secondary",children:"Manage your workforce, roles, and location assignments."})]}),(0,s.jsxs)(o.Z,{direction:"row",spacing:2,children:[(0,s.jsx)(l.Z,{variant:"outlined",startIcon:(0,s.jsx)(C.Z,{}),sx:{borderRadius:2},children:"Export CSV"}),(0,s.jsx)(l.Z,{variant:"contained",sx:{borderRadius:2},children:"+ Invite Member"})]})]}),t&&(0,s.jsx)(c.Z,{severity:"error",sx:{mb:3},children:"Failed to load staff members. Please try again later."}),(0,s.jsxs)(d.Z,{sx:{p:0,borderRadius:4,overflow:"hidden",border:"1px solid",borderColor:"divider"},children:[(0,s.jsxs)(i.Z,{sx:{p:3,display:"flex",gap:2},children:[(0,s.jsx)(h.Z,{placeholder:"Search staff members...",size:"small",sx:{flexGrow:1},value:k,onChange:e=>I(e.target.value),InputProps:{startAdornment:(0,s.jsx)(u.Z,{position:"start",children:(0,s.jsx)(w.Z,{fontSize:"small"})}),sx:{borderRadius:2}}}),(0,s.jsx)(l.Z,{variant:"outlined",startIcon:(0,s.jsx)(L.Z,{}),sx:{borderRadius:2},children:"Filters"})]}),(0,s.jsx)(x.Z,{children:(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(m.Z,{sx:{bgcolor:"rgba(0,0,0,0.01)"},children:(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(g.Z,{sx:{fontWeight:700},children:"Name"}),(0,s.jsx)(g.Z,{sx:{fontWeight:700},children:"Email"}),(0,s.jsx)(g.Z,{sx:{fontWeight:700},children:"Role"}),(0,s.jsx)(g.Z,{sx:{fontWeight:700},children:"Status"}),(0,s.jsx)(g.Z,{align:"right"})]})}),(0,s.jsx)(j.Z,{children:r?(0,s.jsx)(Z.Z,{children:(0,s.jsxs)(g.Z,{colSpan:5,align:"center",sx:{py:10},children:[(0,s.jsx)(p.Z,{size:24,sx:{mr:2}}),(0,s.jsx)(a.Z,{variant:"body2",component:"span",children:"Loading staff..."})]})}):0===E.length?(0,s.jsx)(Z.Z,{children:(0,s.jsx)(g.Z,{colSpan:5,align:"center",sx:{py:10},children:(0,s.jsx)(a.Z,{color:"text.secondary",children:"No staff members found."})})}):E.map(e=>{var r,t;return(0,s.jsxs)(Z.Z,{hover:!0,children:[(0,s.jsx)(g.Z,{children:(0,s.jsxs)(o.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsxs)(v.Z,{sx:{width:32,height:32,bgcolor:"secondary.light",color:"secondary.main",fontWeight:700,fontSize:"0.8rem"},children:[null===(r=e.name.first[0])||void 0===r?void 0:r.toUpperCase(),null===(t=e.name.last[0])||void 0===t?void 0:t.toUpperCase()]}),(0,s.jsx)(i.Z,{children:(0,s.jsxs)(a.Z,{variant:"body2",sx:{fontWeight:700},children:[e.name.first," ",e.name.last]})})]})}),(0,s.jsx)(g.Z,{children:(0,s.jsx)(a.Z,{variant:"body2",children:e.email})}),(0,s.jsx)(g.Z,{children:(0,s.jsx)(y.Z,{label:e.role,size:"small",variant:"outlined",sx:{fontWeight:600,borderRadius:1.5,textTransform:"capitalize",color:"admin"===e.role?"primary.main":"text.primary",borderColor:"admin"===e.role?"primary.main":"divider"}})}),(0,s.jsx)(g.Z,{children:(0,s.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(i.Z,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"active"===e.status?"success.main":"error.main"}}),(0,s.jsx)(a.Z,{variant:"body2",sx:{fontWeight:500},children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})}),(0,s.jsx)(g.Z,{align:"right",children:(0,s.jsx)(b.Z,{size:"small",children:(0,s.jsx)(S.Z,{})})})]},e._id)})})]})})]})]})}},8314:function(e,r,t){"use strict";t.d(r,{h:function(){return i}});var s=t(925);let n=t(5504).env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api/v1",i=s.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let r=localStorage.getItem("accessToken");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var r;let t=e.config;if((null===(r=e.response)||void 0===r?void 0:r.status)===401&&!t._retry){t._retry=!0;try{let e=localStorage.getItem("refreshToken");if(!e)throw Error("No refresh token");let{data:r}=await s.Z.post("".concat(n,"/auth/refresh"),{refreshToken:e});return localStorage.setItem("accessToken",r.accessToken),localStorage.setItem("refreshToken",r.refreshToken),t.headers.Authorization="Bearer ".concat(r.accessToken),i(t)}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)})},9081:function(e,r,t){"use strict";t.d(r,{L8:function(){return c},cs:function(){return l},dE:function(){return a},iy:function(){return o}});var s=t(2025),n=t(8314);let i=e=>n.h.get(e).then(e=>e.data),o=()=>{let{data:e,error:r,mutate:t}=(0,s.ZP)("/users",i);return{staff:(null==e?void 0:e.users)||[],isLoading:!r&&!e,isError:r,mutate:t}},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new URLSearchParams(e).toString(),{data:t,error:n,mutate:o}=(0,s.ZP)("/shifts?".concat(r),i);return{shifts:(null==t?void 0:t.shifts)||[],isLoading:!n&&!t,isError:n,mutate:o}},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new URLSearchParams(e).toString(),{data:t,error:n,mutate:o}=(0,s.ZP)("/timeclock/entries?".concat(r),i);return{entries:(null==t?void 0:t.entries)||[],isLoading:!n&&!t,isError:n,mutate:o}},c=(e,r)=>{let{data:t,error:i,mutate:o}=(0,s.ZP)(e&&r?["/payroll/calculate",e,r]:null,()=>n.h.post("/payroll/calculate",{startDate:e,endDate:r}).then(e=>e.data));return{payroll:(null==t?void 0:t.results)||[],summary:(null==t?void 0:t.summary)||{totalGrossPay:0,totalPAYE:0,totalNI:0,totalNetPay:0},isLoading:!i&&!t,isError:i,mutate:o}}}},function(e){e.O(0,[462,954,781,470,541,821,561,169,402,66,293,997,744],function(){return e(e.s=7539)}),_N_E=e.O()}]);